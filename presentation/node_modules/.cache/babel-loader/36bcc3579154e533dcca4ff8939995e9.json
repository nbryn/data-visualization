{"ast":null,"code":"import _regeneratorRuntime from \"/home/nbryn/Desktop/jamiipay/jamiipay-web-dashboard/presentation/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/nbryn/Desktop/jamiipay/jamiipay-web-dashboard/presentation/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/home/nbryn/Desktop/jamiipay/jamiipay-web-dashboard/presentation/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/nbryn/Desktop/jamiipay/jamiipay-web-dashboard/presentation/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/nbryn/Desktop/jamiipay/jamiipay-web-dashboard/presentation/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/nbryn/Desktop/jamiipay/jamiipay-web-dashboard/presentation/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/nbryn/Desktop/jamiipay/jamiipay-web-dashboard/presentation/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"/home/nbryn/Desktop/jamiipay/jamiipay-web-dashboard/presentation/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/nbryn/Desktop/jamiipay/jamiipay-web-dashboard/presentation/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/nbryn/Desktop/jamiipay/jamiipay-web-dashboard/presentation/src/components/user/Signin.js\";\nimport React, { Component } from \"react\";\nimport { Alert } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\nimport { login } from \"../../redux/actions/user/LoginAction\";\n\nvar Signin =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Signin, _Component);\n\n  function Signin(props) {\n    var _this;\n\n    _classCallCheck(this, Signin);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Signin).call(this, props));\n\n    _this.handleChange = function (event) {\n      _this.setState(_defineProperty({}, event.target.name, event.target.value));\n    };\n\n    _this.handleSubmit =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(event) {\n        var email, password, loginError;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                event.preventDefault();\n                email = _this.state.email;\n                password = _this.state.password; // Login returns error if login fails\n\n                _context.next = 5;\n                return _this.props.login(email, password, _this.props.history);\n\n              case 5:\n                loginError = _context.sent;\n\n                if (loginError) {\n                  _this.setState({\n                    email: \"\",\n                    password: \"\",\n                    showAlert: true,\n                    errorMessage: loginError\n                  });\n                }\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.state = {\n      email: \"\",\n      password: \"\",\n      showAlert: false,\n      errorMessage: \"\"\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Signin, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var token = localStorage.getItem(\"token\");\n\n      if (token) {\n        this.props.history.push(\"/dashboard\");\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-sm-9 col-md-7 col-lg-5 mx-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, this.state.showAlert ? React.createElement(Alert, {\n        bsStyle: \"danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        style: {\n          textAlign: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, this.state.errorMessage, \" - Please try again\")) : \"\", React.createElement(\"div\", {\n        className: \"card card-signin my-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"card-title text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, \"Sign In\"), React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        autoComplete: \"off\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-label-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        id: \"inputEmail\",\n        name: \"email\",\n        className: \"form-control\",\n        placeholder: \"Email address\",\n        value: this.state.email,\n        required: true,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"inputEmail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, \"Email address\")), React.createElement(\"div\", {\n        className: \"form-label-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"password\",\n        id: \"inputPassword\",\n        name: \"password\",\n        className: \"form-control\",\n        placeholder: \"Password\",\n        value: this.state.password,\n        required: true,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"inputPassword\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, \"Password\")), React.createElement(\"button\", {\n        className: \"btn btn-lg btn-primary btn-block text-uppercase\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, \"Sign in\"), React.createElement(\"hr\", {\n        className: \"my-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      })))))));\n    }\n  }]);\n\n  return Signin;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    user: state.user\n  };\n};\n\nexport default connect(mapStateToProps, {\n  login: login\n})(Signin);","map":{"version":3,"sources":["/home/nbryn/Desktop/jamiipay/jamiipay-web-dashboard/presentation/src/components/user/Signin.js"],"names":["React","Component","Alert","connect","login","Signin","props","handleChange","event","setState","target","name","value","handleSubmit","preventDefault","email","state","password","history","loginError","showAlert","errorMessage","bind","token","localStorage","getItem","push","textAlign","mapStateToProps","user"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Alert } from \"react-bootstrap\";\n\nimport { connect } from \"react-redux\";\nimport { login } from \"../../redux/actions/user/LoginAction\";\n\nclass Signin extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      email: \"\",\n      password: \"\",\n      showAlert: false,\n      errorMessage: \"\"\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    const token = localStorage.getItem(\"token\");\n\n    if (token) {\n      this.props.history.push(\"/dashboard\");\n    }\n  }\n\n  handleChange = event => {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  };\n\n  handleSubmit = async event => {\n    event.preventDefault();\n\n    const email = this.state.email;\n    const password = this.state.password;\n\n    // Login returns error if login fails\n    const loginError = await this.props.login(\n      email,\n      password,\n      this.props.history\n    );\n\n    if (loginError) {\n      this.setState({\n        email: \"\",\n        password: \"\",\n        showAlert: true,\n        errorMessage: loginError\n      });\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-sm-9 col-md-7 col-lg-5 mx-auto\">\n            {this.state.showAlert ? (\n              <Alert bsStyle=\"danger\">\n                \n\n                <p style={{ textAlign: \"center\" }}>\n                  {this.state.errorMessage} - Please try again\n                </p>\n              </Alert>\n            ) : (\n              \"\"\n            )}\n            <div className=\"card card-signin my-5\">\n              <div className=\"card-body\">\n                <h3 className=\"card-title text-center\">Sign In</h3>\n                <form onSubmit={this.handleSubmit} autoComplete=\"off\">\n                  <div className=\"form-label-group\">\n                    <input\n                      id=\"inputEmail\"\n                      name=\"email\"\n                      className=\"form-control\"\n                      placeholder=\"Email address\"\n                      value={this.state.email}\n                      required\n                      onChange={this.handleChange}\n                    />\n                    <label htmlFor=\"inputEmail\">Email address</label>\n                  </div>\n\n                  <div className=\"form-label-group\">\n                    <input\n                      type=\"password\"\n                      id=\"inputPassword\"\n                      name=\"password\"\n                      className=\"form-control\"\n                      placeholder=\"Password\"\n                      value={this.state.password}\n                      required\n                      onChange={this.handleChange}\n                    />\n                    <label htmlFor=\"inputPassword\">Password</label>\n                  </div>\n\n                  <button\n                    className=\"btn btn-lg btn-primary btn-block text-uppercase\"\n                    type=\"submit\"\n                  >\n                    Sign in\n                  </button>\n                  <hr className=\"my-4\" />\n                </form>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user\n  };\n};\n\nexport default connect(mapStateToProps, { login })(Signin);\n"]},"metadata":{},"sourceType":"module"}