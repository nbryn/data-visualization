{"ast":null,"code":"import _regeneratorRuntime from \"/home/nbryn/Desktop/jamiipay/jamiipay-web-dashboard/presentation/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/nbryn/Desktop/jamiipay/jamiipay-web-dashboard/presentation/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/nbryn/Desktop/jamiipay/jamiipay-web-dashboard/presentation/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/nbryn/Desktop/jamiipay/jamiipay-web-dashboard/presentation/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/nbryn/Desktop/jamiipay/jamiipay-web-dashboard/presentation/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/nbryn/Desktop/jamiipay/jamiipay-web-dashboard/presentation/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/nbryn/Desktop/jamiipay/jamiipay-web-dashboard/presentation/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/nbryn/Desktop/jamiipay/jamiipay-web-dashboard/presentation/src/components/dashboard/views/UserView.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Grid, Row, Col } from \"react-bootstrap\";\nimport { KPICard } from \"../util/KPICard\";\nimport Sidebar from \"../../navigation/Sidebar\";\nimport Header from \"../../navigation/Header\";\nimport TotalGraph from \"../charts/graph/TotalGraph\";\nimport SizeChart from \"../charts/circle/SizeChart\";\nimport LastMonthBar from \"../charts/bar/LastMonthBar\";\nimport LastYearBar from \"../charts/bar/LastYearBar\";\nimport { fetchUserStats, fetchUsersLastYear, fetchUserGender } from \"../../../redux/actions/KPI/UserStatsActions\";\nimport { getCurrentTime } from \"../../../util/Date\";\n\nvar KPIView =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(KPIView, _Component);\n\n  function KPIView(props) {\n    var _this;\n\n    _classCallCheck(this, KPIView);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(KPIView).call(this, props));\n    _this.state = {\n      userTotal: \"\",\n      usersToday: \"\",\n      usersTodayText: \"\",\n      userMonth: \"\",\n      userYear: \"\",\n      usersLastMonth: \"\",\n      usersLastYear: \"\",\n      userGender: \"\",\n      lastUpdate: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(KPIView, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var _this2 = this;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.fetchData();\n                setInterval(\n                /*#__PURE__*/\n                _asyncToGenerator(\n                /*#__PURE__*/\n                _regeneratorRuntime.mark(function _callee() {\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          _this2.fetchData();\n\n                        case 1:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                })), 1000000);\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"fetchData\",\n    value: function () {\n      var _fetchData = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3() {\n        var userStats, usersLastYear, userGender, lastUpdatedAt, userMonthCount, userYearCount;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.props.fetchUserStats();\n\n              case 2:\n                _context3.next = 4;\n                return this.props.fetchUsersLastYear();\n\n              case 4:\n                _context3.next = 6;\n                return this.props.fetchUserGender();\n\n              case 6:\n                userStats = this.props.userStats;\n                usersLastYear = this.props.usersLastYear;\n                userGender = this.props.userGender;\n                lastUpdatedAt = getCurrentTime();\n                userMonthCount = 0;\n                userYearCount = 0;\n                userStats.signups.forEach(function (element) {\n                  return userMonthCount += element.count;\n                });\n                usersLastYear.data.forEach(function (element) {\n                  return userYearCount += element.count;\n                });\n                this.setState({\n                  userTotal: userStats.numberOfUsers,\n                  usersToday: userStats.signups[userStats.signups.length - 1].count,\n                  usersTodayText: userStats.signups[userStats.signups.length - 1].day.day + \"/\" + userStats.signups[userStats.signups.length - 1].day.month,\n                  userMonth: userMonthCount,\n                  userYear: userYearCount,\n                  usersLastMonth: userStats.signups,\n                  usersLastYear: usersLastYear.data,\n                  userGender: userGender,\n                  lastUpdate: lastUpdatedAt\n                });\n\n              case 15:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function fetchData() {\n        return _fetchData.apply(this, arguments);\n      }\n\n      return fetchData;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(Sidebar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        id: \"main-panel\",\n        className: \"main-panel\",\n        ref: \"mainPanel\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(Header, {\n        title: \"Users\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        fluid: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(Col, {\n        lg: 3,\n        sm: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(KPICard, {\n        bigIcon: React.createElement(\"i\", {\n          className: \"pe-7s-user text-warning\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }),\n        statsText: \"Total Users\",\n        statsValue: this.state.userTotal,\n        statsIcon: React.createElement(\"i\", {\n          className: \"fa fa-refresh\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }),\n        statsIconText: \"Last Update: \".concat(this.state.lastUpdate),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      })), React.createElement(Col, {\n        lg: 3,\n        sm: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(KPICard, {\n        bigIcon: React.createElement(\"i\", {\n          className: \"pe-7s-user text-warning\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }),\n        statsText: \"Users \" + this.state.usersTodayText,\n        statsValue: this.state.usersToday,\n        statsIcon: React.createElement(\"i\", {\n          className: \"fa fa-refresh\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        }),\n        statsIconText: \"Last Update: \".concat(this.state.lastUpdate),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      })), React.createElement(Col, {\n        lg: 3,\n        sm: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(KPICard, {\n        bigIcon: React.createElement(\"i\", {\n          className: \"pe-7s-user text-warning\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }),\n        statsText: \"Last Month\",\n        statsValue: this.state.userMonth,\n        statsIcon: React.createElement(\"i\", {\n          className: \"fa fa-calendar-o\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }),\n        statsIconText: \"Last Update: \".concat(this.state.lastUpdate),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      })), React.createElement(Col, {\n        lg: 3,\n        sm: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(KPICard, {\n        bigIcon: React.createElement(\"i\", {\n          className: \"pe-7s-user text-warning\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }),\n        statsText: \"Last Year\",\n        statsValue: this.state.userTotal,\n        statsIcon: React.createElement(\"i\", {\n          className: \"fa fa-clock-o\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        }),\n        statsIconText: \"Last Update: \".concat(this.state.lastUpdate),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(Col, {\n        lg: 4,\n        sm: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(TotalGraph, {\n        title: \"Total Users\",\n        stroke: \"#ff0000\",\n        data: this.state.usersLastYear,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(Col, {\n        lg: 4,\n        sm: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(LastMonthBar, {\n        title: \"Users Per Day\",\n        color: \"#228b22\",\n        data: this.state.usersLastMonth,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      })), React.createElement(Col, {\n        lg: 4,\n        sm: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(SizeChart, {\n        title: \"Gender Distribution\",\n        colors: [\"#1828E8\", \"#228b22\"],\n        data: this.state.userGender,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      })), React.createElement(Col, {\n        lg: 4,\n        sm: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(LastYearBar, {\n        title: \"Users Per Month\",\n        color: \"#ff0000\",\n        data: this.state.usersLastYear,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      })))))));\n    }\n  }]);\n\n  return KPIView;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    userStats: state.KPI.userStats,\n    usersLastYear: state.KPI.usersLastYear,\n    userGender: state.KPI.userGender\n  };\n};\n\nexport default connect(mapStateToProps, {\n  fetchUserStats: fetchUserStats,\n  fetchUsersLastYear: fetchUsersLastYear,\n  fetchUserGender: fetchUserGender\n})(KPIView);","map":{"version":3,"sources":["/home/nbryn/Desktop/jamiipay/jamiipay-web-dashboard/presentation/src/components/dashboard/views/UserView.js"],"names":["React","Component","connect","Grid","Row","Col","KPICard","Sidebar","Header","TotalGraph","SizeChart","LastMonthBar","LastYearBar","fetchUserStats","fetchUsersLastYear","fetchUserGender","getCurrentTime","KPIView","props","state","userTotal","usersToday","usersTodayText","userMonth","userYear","usersLastMonth","usersLastYear","userGender","lastUpdate","fetchData","setInterval","userStats","lastUpdatedAt","userMonthCount","userYearCount","signups","forEach","element","count","data","setState","numberOfUsers","length","day","month","mapStateToProps","KPI"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Grid, Row, Col } from \"react-bootstrap\";\nimport { KPICard } from \"../util/KPICard\";\n\nimport Sidebar from \"../../navigation/Sidebar\";\nimport Header from \"../../navigation/Header\";\n\nimport TotalGraph from \"../charts/graph/TotalGraph\";\nimport SizeChart from \"../charts/circle/SizeChart\";\nimport LastMonthBar from \"../charts/bar/LastMonthBar\";\nimport LastYearBar from \"../charts/bar/LastYearBar\";\n\nimport {\n  fetchUserStats,\n  fetchUsersLastYear,\n  fetchUserGender\n} from \"../../../redux/actions/KPI/UserStatsActions\";\nimport { getCurrentTime } from \"../../../util/Date\";\n\nclass KPIView extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      userTotal: \"\",\n      usersToday: \"\",\n      usersTodayText: \"\",\n      userMonth: \"\",\n      userYear: \"\",\n      usersLastMonth: \"\",\n      usersLastYear: \"\",\n      userGender: \"\",\n      lastUpdate: \"\"\n    };\n  }\n  async componentDidMount() {\n    this.fetchData();\n\n    setInterval(async () => {\n      this.fetchData();\n    }, 1000000);\n  }\n\n  async fetchData() {\n    await this.props.fetchUserStats();\n    await this.props.fetchUsersLastYear();\n    await this.props.fetchUserGender();\n\n    const userStats = this.props.userStats;\n    const usersLastYear = this.props.usersLastYear;\n    const userGender = this.props.userGender;\n\n    let lastUpdatedAt = getCurrentTime();\n\n    let userMonthCount = 0;\n    let userYearCount = 0;\n\n    userStats.signups.forEach(element => (userMonthCount += element.count));\n    usersLastYear.data.forEach(element => (userYearCount += element.count));\n\n    this.setState({\n      userTotal: userStats.numberOfUsers,\n      usersToday: userStats.signups[userStats.signups.length - 1].count,\n      usersTodayText:\n        userStats.signups[userStats.signups.length - 1].day.day +\n        \"/\" +\n        userStats.signups[userStats.signups.length - 1].day.month,\n      userMonth: userMonthCount,\n      userYear: userYearCount,\n      usersLastMonth: userStats.signups,\n      usersLastYear: usersLastYear.data,\n      userGender: userGender,\n      lastUpdate: lastUpdatedAt\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"wrapper\">\n        <Sidebar />\n        <div id=\"main-panel\" className=\"main-panel\" ref=\"mainPanel\">\n          <Header title=\"Users\" />\n          <div className=\"content\">\n            <Grid fluid>\n              <Row>\n                <Col lg={3} sm={6}>\n                  <KPICard\n                    bigIcon={<i className=\"pe-7s-user text-warning\" />}\n                    statsText=\"Total Users\"\n                    statsValue={this.state.userTotal}\n                    statsIcon={<i className=\"fa fa-refresh\" />}\n                    statsIconText={`Last Update: ${this.state.lastUpdate}`}\n                  />\n                </Col>\n                <Col lg={3} sm={6}>\n                  <KPICard\n                    bigIcon={<i className=\"pe-7s-user text-warning\" />}\n                    statsText={\"Users \" + this.state.usersTodayText}\n                    statsValue={this.state.usersToday}\n                    statsIcon={<i className=\"fa fa-refresh\" />}\n                    statsIconText={`Last Update: ${this.state.lastUpdate}`}\n                  />\n                </Col>\n\n                <Col lg={3} sm={6}>\n                  <KPICard\n                    bigIcon={<i className=\"pe-7s-user text-warning\" />}\n                    statsText=\"Last Month\"\n                    statsValue={this.state.userMonth}\n                    statsIcon={<i className=\"fa fa-calendar-o\" />}\n                    statsIconText={`Last Update: ${this.state.lastUpdate}`}\n                  />\n                </Col>\n                <Col lg={3} sm={6}>\n                  <KPICard\n                    bigIcon={<i className=\"pe-7s-user text-warning\" />}\n                    statsText=\"Last Year\"\n                    statsValue={this.state.userTotal}\n                    statsIcon={<i className=\"fa fa-clock-o\" />}\n                    statsIconText={`Last Update: ${this.state.lastUpdate}`}\n                  />\n                </Col>\n              </Row>\n\n              <Row>\n                <Col lg={4} sm={6}>\n                  <TotalGraph\n                    title=\"Total Users\"\n                    stroke=\"#ff0000\"\n                    data={this.state.usersLastYear}\n                  />\n                </Col>\n              </Row>\n              <Row>\n                <Col lg={4} sm={6}>\n                  <LastMonthBar\n                    title=\"Users Per Day\"\n                    color=\"#228b22\"\n                    data={this.state.usersLastMonth}\n                  />\n                </Col>\n                <Col lg={4} sm={6}>\n                  <SizeChart\n                    title=\"Gender Distribution\"\n                    colors={[\"#1828E8\", \"#228b22\"]}\n                    data={this.state.userGender}\n                  />\n                </Col>\n\n                <Col lg={4} sm={6}>\n                  <LastYearBar\n                    title=\"Users Per Month\"\n                    color=\"#ff0000\"\n                    data={this.state.usersLastYear}\n                  />\n                </Col>\n              </Row>\n            </Grid>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    userStats: state.KPI.userStats,\n    usersLastYear: state.KPI.usersLastYear,\n    userGender: state.KPI.userGender\n  };\n};\n\nexport default connect(mapStateToProps, {\n  fetchUserStats,\n  fetchUsersLastYear,\n  fetchUserGender\n})(KPIView);\n"]},"metadata":{},"sourceType":"module"}