{"ast":null,"code":"import _regeneratorRuntime from \"/home/nbryn/Desktop/jamiipay/jamiipay-web-dashboard/presentation/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/nbryn/Desktop/jamiipay/jamiipay-web-dashboard/presentation/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { fetchFromServer } from \"../Fetch\";\nimport { setTokenInLocalStorage } from \"../../../security/Token\";\nexport var login = function login(username, password, history) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(dispatch) {\n        var data, response, error;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                data = \"mutation signin {\\n    data:\\n     signin(input: {\\n       username: \\\"\".concat(username, \"\\\"\\n       password: \\\"\").concat(password, \"\\\"\\n     })  \\n     }\");\n                _context.next = 3;\n                return fetchFromServer(\"post\", data);\n\n              case 3:\n                response = _context.sent;\n                error = response.data.data.data.error;\n\n                if (!error) {\n                  _context.next = 9;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", \"Wrong Email/Username\");\n\n              case 9:\n                setTokenInLocalStorage(response);\n                history.push(\"/dashboard\");\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()\n  );\n};","map":{"version":3,"sources":["/home/nbryn/Desktop/jamiipay/jamiipay-web-dashboard/presentation/src/redux/actions/user/LoginAction.js"],"names":["fetchFromServer","setTokenInLocalStorage","login","username","password","history","dispatch","data","response","error","push"],"mappings":";;AAAA,SAASA,eAAT,QAAgC,UAAhC;AACA,SAASC,sBAAT,QAAuC,yBAAvC;AAEA,OAAO,IAAMC,KAAK,GAAG,SAARA,KAAQ,CAACC,QAAD,EAAWC,QAAX,EAAqBC,OAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAiC,iBAAMC,QAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAC9CC,gBAAAA,IAD8C,oFAIlCJ,QAJkC,oCAKlCC,QALkC;AAAA;AAAA,uBAS7BJ,eAAe,CAAC,MAAD,EAASO,IAAT,CATc;;AAAA;AAS9CC,gBAAAA,QAT8C;AAW9CC,gBAAAA,KAX8C,GAWtCD,QAAQ,CAACD,IAAT,CAAcA,IAAd,CAAmBA,IAAnB,CAAwBE,KAXc;;AAAA,qBAahDA,KAbgD;AAAA;AAAA;AAAA;;AAAA,iDAc3C,sBAd2C;;AAAA;AAgBlDR,gBAAAA,sBAAsB,CAACO,QAAD,CAAtB;AAEAH,gBAAAA,OAAO,CAACK,IAAR,CAAa,YAAb;;AAlBkD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAjC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAd","sourcesContent":["import { fetchFromServer } from \"../Fetch\";\nimport { setTokenInLocalStorage } from \"../../../security/Token\";\n\nexport const login = (username, password, history) => async dispatch => {\n  const data = `mutation signin {\n    data:\n     signin(input: {\n       username: \"${username}\"\n       password: \"${password}\"\n     })  \n     }`;\n\n  const response = await fetchFromServer(\"post\", data);\n\n  const error = response.data.data.data.error;\n\n  if (error) {\n    return \"Wrong Email/Username\";\n  } else {\n    setTokenInLocalStorage(response);\n\n    history.push(\"/dashboard\");\n  }\n\n};\n"]},"metadata":{},"sourceType":"module"}