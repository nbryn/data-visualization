{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar graphql_1 = require(\"graphql\");\n\nvar isSpecifiedScalarType_1 = require(\"../isSpecifiedScalarType\");\n\nvar visitSchema_1 = require(\"../transforms/visitSchema\");\n\nvar RenameTypes =\n/** @class */\nfunction () {\n  function RenameTypes(renamer, options) {\n    this.renamer = renamer;\n    this.reverseMap = {};\n\n    var _a = options || {},\n        _b = _a.renameBuiltins,\n        renameBuiltins = _b === void 0 ? false : _b,\n        _c = _a.renameScalars,\n        renameScalars = _c === void 0 ? true : _c;\n\n    this.renameBuiltins = renameBuiltins;\n    this.renameScalars = renameScalars;\n  }\n\n  RenameTypes.prototype.transformSchema = function (originalSchema) {\n    var _a;\n\n    var _this = this;\n\n    return visitSchema_1.visitSchema(originalSchema, (_a = {}, _a[visitSchema_1.VisitSchemaKind.TYPE] = function (type) {\n      if (isSpecifiedScalarType_1.default(type) && !_this.renameBuiltins) {\n        return undefined;\n      }\n\n      if (type instanceof graphql_1.GraphQLScalarType && !_this.renameScalars) {\n        return undefined;\n      }\n\n      var newName = _this.renamer(type.name);\n\n      if (newName && newName !== type.name) {\n        _this.reverseMap[newName] = type.name;\n        var newType = Object.assign(Object.create(type), type);\n        newType.name = newName;\n        return newType;\n      }\n    }, _a[visitSchema_1.VisitSchemaKind.ROOT_OBJECT] = function (type) {\n      return undefined;\n    }, _a));\n  };\n\n  RenameTypes.prototype.transformRequest = function (originalRequest) {\n    var _a;\n\n    var _this = this;\n\n    var newDocument = graphql_1.visit(originalRequest.document, (_a = {}, _a[graphql_1.Kind.NAMED_TYPE] = function (node) {\n      var name = node.name.value;\n\n      if (name in _this.reverseMap) {\n        return __assign(__assign({}, node), {\n          name: {\n            kind: graphql_1.Kind.NAME,\n            value: _this.reverseMap[name]\n          }\n        });\n      }\n    }, _a));\n    return {\n      document: newDocument,\n      variables: originalRequest.variables\n    };\n  };\n\n  RenameTypes.prototype.transformResult = function (result) {\n    if (result.data) {\n      var data = this.renameTypes(result.data, 'data');\n\n      if (data !== result.data) {\n        return __assign(__assign({}, result), {\n          data: data\n        });\n      }\n    }\n\n    return result;\n  };\n\n  RenameTypes.prototype.renameTypes = function (value, name) {\n    var _this = this;\n\n    if (name === '__typename') {\n      return this.renamer(value);\n    }\n\n    if (value && typeof value === 'object') {\n      var newValue_1 = Array.isArray(value) ? [] // Create a new object with the same prototype.\n      : Object.create(Object.getPrototypeOf(value));\n      var returnNewValue_1 = false;\n      Object.keys(value).forEach(function (key) {\n        var oldChild = value[key];\n\n        var newChild = _this.renameTypes(oldChild, key);\n\n        newValue_1[key] = newChild;\n\n        if (newChild !== oldChild) {\n          returnNewValue_1 = true;\n        }\n      });\n\n      if (returnNewValue_1) {\n        return newValue_1;\n      }\n    }\n\n    return value;\n  };\n\n  return RenameTypes;\n}();\n\nexports.default = RenameTypes;","map":null,"metadata":{},"sourceType":"script"}