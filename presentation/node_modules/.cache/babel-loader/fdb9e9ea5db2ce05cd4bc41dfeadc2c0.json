{"ast":null,"code":"import { fetchFromServer } from \"../Fetch\";\nimport { KEY_STATS } from \"../ActionTypes\";\nexport const fetchKeyStats = () => async dispatch => {\n  let keyStats = {\n    groupStats: \"\",\n    userStats: \"\",\n    shareStats: \"\",\n    meetingStats: \"\"\n  };\n  const groupResponse = await fetchKeyGroupStats();\n  keyStats.groupStats = groupResponse.groupStats;\n  const userResponse = await fetchKeyUserStats();\n  keyStats.userStats = userResponse.userStats;\n  const meetingResponse = await fetchKeyMeetingStats();\n  keyStats.meetingStats = meetingResponse.meetingStats;\n  const shareResponse = await fetchKeyFinanceStats();\n  keyStats.shareStats = shareResponse.financeStats.shareStats.shareTotal;\n  dispatch({\n    type: KEY_STATS,\n    payload: keyStats\n  });\n};\n\nasync function fetchKeyGroupStats() {\n  const groupQuery = `query{\n    groupStats{\n      groupTotal    \n     groupsLastMonth{\n        data{\n          count\n          day{\n            year\n            month\n            day\n          }     \n        }\n    }\n    groupsLastYear{\n        data{\n          year\n          month\n          count  \n        }\n      }      \n    }\n    }`;\n  const response = await fetchFromServer(\"post\", groupQuery);\n  return response.data.data;\n}\n\nasync function fetchKeyUserStats() {\n  const userQuery = `query{\n    userStats{\n      userCount   \n      userGenderStats{\n        value\n        count\n       }\n      usersLastYear{\n        data{\n          year\n          month\n          count\n        }\n      }       \n    }\n    }`;\n  const response = await fetchFromServer(\"post\", userQuery);\n  return response.data.data;\n}\n\nasync function fetchKeyMeetingStats() {\n  const meetingQuery = `query {\n    meetingStats{\n      meetingTotal\n      meetingsLastYear{\n        data{\n          year\n          month\n          count\n        }\n      }            \n    }\n  }`;\n  const response = await fetchFromServer(\"post\", meetingQuery);\n  return response.data.data;\n}\n\nasync function fetchKeyFinanceStats() {\n  const shareQuery = `query {\n    financeStats{\n      shareStats {\n        shareTotal\n      }\n    }\n  }`;\n  const response = await fetchFromServer(\"post\", shareQuery);\n  return response.data.data;\n}","map":{"version":3,"sources":["/home/nbryn/Desktop/Dashboard/presentation/src/redux/actions/kpi/KeyStatsAction.js"],"names":["fetchFromServer","KEY_STATS","fetchKeyStats","dispatch","keyStats","groupStats","userStats","shareStats","meetingStats","groupResponse","fetchKeyGroupStats","userResponse","fetchKeyUserStats","meetingResponse","fetchKeyMeetingStats","shareResponse","fetchKeyFinanceStats","financeStats","shareTotal","type","payload","groupQuery","response","data","userQuery","meetingQuery","shareQuery"],"mappings":"AAAA,SAASA,eAAT,QAAgC,UAAhC;AACA,SAASC,SAAT,QAA0B,gBAA1B;AAEA,OAAO,MAAMC,aAAa,GAAG,MAAM,MAAMC,QAAN,IAAkB;AACnD,MAAIC,QAAQ,GAAG;AACbC,IAAAA,UAAU,EAAE,EADC;AAEbC,IAAAA,SAAS,EAAE,EAFE;AAGbC,IAAAA,UAAU,EAAE,EAHC;AAIbC,IAAAA,YAAY,EAAE;AAJD,GAAf;AAOA,QAAMC,aAAa,GAAG,MAAMC,kBAAkB,EAA9C;AACAN,EAAAA,QAAQ,CAACC,UAAT,GAAsBI,aAAa,CAACJ,UAApC;AAEA,QAAMM,YAAY,GAAG,MAAMC,iBAAiB,EAA5C;AACAR,EAAAA,QAAQ,CAACE,SAAT,GAAqBK,YAAY,CAACL,SAAlC;AAEA,QAAMO,eAAe,GAAG,MAAMC,oBAAoB,EAAlD;AACAV,EAAAA,QAAQ,CAACI,YAAT,GAAwBK,eAAe,CAACL,YAAxC;AAEA,QAAMO,aAAa,GAAG,MAAMC,oBAAoB,EAAhD;AAEAZ,EAAAA,QAAQ,CAACG,UAAT,GAAsBQ,aAAa,CAACE,YAAd,CAA2BV,UAA3B,CAAsCW,UAA5D;AAEAf,EAAAA,QAAQ,CAAC;AACPgB,IAAAA,IAAI,EAAElB,SADC;AAEPmB,IAAAA,OAAO,EAAEhB;AAFF,GAAD,CAAR;AAID,CAzBM;;AA2BP,eAAeM,kBAAf,GAAoC;AAClC,QAAMW,UAAU,GAAI;;;;;;;;;;;;;;;;;;;;;MAApB;AAuBA,QAAMC,QAAQ,GAAG,MAAMtB,eAAe,CAAC,MAAD,EAASqB,UAAT,CAAtC;AAEA,SAAOC,QAAQ,CAACC,IAAT,CAAcA,IAArB;AACD;;AAED,eAAeX,iBAAf,GAAmC;AACjC,QAAMY,SAAS,GAAI;;;;;;;;;;;;;;;MAAnB;AAiBA,QAAMF,QAAQ,GAAG,MAAMtB,eAAe,CAAC,MAAD,EAASwB,SAAT,CAAtC;AAEA,SAAOF,QAAQ,CAACC,IAAT,CAAcA,IAArB;AACD;;AAED,eAAeT,oBAAf,GAAsC;AACpC,QAAMW,YAAY,GAAI;;;;;;;;;;;IAAtB;AAYA,QAAMH,QAAQ,GAAG,MAAMtB,eAAe,CAAC,MAAD,EAASyB,YAAT,CAAtC;AAEA,SAAOH,QAAQ,CAACC,IAAT,CAAcA,IAArB;AACD;;AAED,eAAeP,oBAAf,GAAsC;AACpC,QAAMU,UAAU,GAAI;;;;;;IAApB;AAOA,QAAMJ,QAAQ,GAAG,MAAMtB,eAAe,CAAC,MAAD,EAAS0B,UAAT,CAAtC;AAEA,SAAOJ,QAAQ,CAACC,IAAT,CAAcA,IAArB;AACD","sourcesContent":["import { fetchFromServer } from \"../Fetch\";\nimport { KEY_STATS } from \"../ActionTypes\";\n\nexport const fetchKeyStats = () => async dispatch => {\n  let keyStats = {\n    groupStats: \"\",\n    userStats: \"\",\n    shareStats: \"\",\n    meetingStats: \"\"\n  };\n\n  const groupResponse = await fetchKeyGroupStats();\n  keyStats.groupStats = groupResponse.groupStats;\n\n  const userResponse = await fetchKeyUserStats();\n  keyStats.userStats = userResponse.userStats;\n\n  const meetingResponse = await fetchKeyMeetingStats();\n  keyStats.meetingStats = meetingResponse.meetingStats;\n\n  const shareResponse = await fetchKeyFinanceStats();\n\n  keyStats.shareStats = shareResponse.financeStats.shareStats.shareTotal;\n\n  dispatch({\n    type: KEY_STATS,\n    payload: keyStats\n  });\n};\n\nasync function fetchKeyGroupStats() {\n  const groupQuery = `query{\n    groupStats{\n      groupTotal    \n     groupsLastMonth{\n        data{\n          count\n          day{\n            year\n            month\n            day\n          }     \n        }\n    }\n    groupsLastYear{\n        data{\n          year\n          month\n          count  \n        }\n      }      \n    }\n    }`;\n\n  const response = await fetchFromServer(\"post\", groupQuery);\n\n  return response.data.data;\n}\n\nasync function fetchKeyUserStats() {\n  const userQuery = `query{\n    userStats{\n      userCount   \n      userGenderStats{\n        value\n        count\n       }\n      usersLastYear{\n        data{\n          year\n          month\n          count\n        }\n      }       \n    }\n    }`;\n\n  const response = await fetchFromServer(\"post\", userQuery);\n\n  return response.data.data;\n}\n\nasync function fetchKeyMeetingStats() {\n  const meetingQuery = `query {\n    meetingStats{\n      meetingTotal\n      meetingsLastYear{\n        data{\n          year\n          month\n          count\n        }\n      }            \n    }\n  }`;\n  const response = await fetchFromServer(\"post\", meetingQuery);\n\n  return response.data.data;\n}\n\nasync function fetchKeyFinanceStats() {\n  const shareQuery = `query {\n    financeStats{\n      shareStats {\n        shareTotal\n      }\n    }\n  }`;\n  const response = await fetchFromServer(\"post\", shareQuery);\n\n  return response.data.data;\n}\n"]},"metadata":{},"sourceType":"module"}